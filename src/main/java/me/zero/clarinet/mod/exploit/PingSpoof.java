package me.zero.clarinet.mod.exploit;

import org.lwjgl.input.Keyboard;

import me.zero.clarinet.event.api.EventTarget;

import me.zero.clarinet.event.network.EventPacketSend;
import me.zero.clarinet.mod.Category;
import me.zero.clarinet.mod.Mod;
import me.zero.values.types.NumberValue;
import net.minecraft.network.play.client.CPacketKeepAlive;

public class PingSpoof extends Mod {
	
	public NumberValue lag = new NumberValue(this, "Lag", "lag", 120D, 20D, 150D, 5D);
	
	private int tries = 0;
	
	public PingSpoof() {
		super("PingSpoof", "Welcome to DialUp", Keyboard.KEY_NONE, Category.EXPLOIT);
	}
	
	@EventTarget
	public void onPacketSend(EventPacketSend event) {
		if (event.getPacket() instanceof CPacketKeepAlive) {
			if (tries > lag.getValue().intValue()) {
				tries = 0;
			}
			if (tries != 0) {
				event.setCancelled(true);
			}
			tries++;
		}
	}
}
